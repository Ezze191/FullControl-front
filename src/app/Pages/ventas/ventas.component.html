<h2 class="text-center my-5 display-6 fw-semibold text-primary">ğŸ“Š REPORTE DE VENTAS</h2>

<div class="card p-4 shadow-lg border-0 rounded-4 bg-white">
  <!-- Botones y Totales Header -->
  <div class="d-flex justify-content-between align-items-center flex-wrap gap-3 mb-4 border-bottom pb-4">
    <!-- Botones de AcciÃ³n -->
    <div class="d-flex gap-2">
      <button class="btn btn-outline-danger d-inline-flex align-items-center gap-1" (click)="exportarPDF()">
        <i class="bi bi-file-earmark-pdf-fill"></i> PDF
      </button>
      <button class="btn btn-outline-success d-inline-flex align-items-center gap-1" (click)="exportarExcel()">
        <i class="bi bi-file-earmark-excel-fill"></i> Excel
      </button>
    </div>

    <!-- Totales -->
    <div class="text-end">
      <p class="mb-1 fw-bold text-secondary">
        ğŸ§¾ Total ventas: <span class="text-success">${{ getTotalVentas() }}</span>
      </p>
      <p class="mb-0 fw-bold text-secondary">
        ğŸ“¦ Total unidades: <span class="text-success">{{ getTotalUnidades() }}</span>
      </p>
    </div>
  </div>

  <div class="d-flex justify-content-between align-items-center flex-wrap gap-3 mb-4">
    <!-- Filtros de fecha -->
    <!-- Filtros Avanzados -->
    <!-- Toolbar -->
    <div class="row g-3 flex-grow-1">

      <!-- 1. BÃºsqueda -->
      <div class="col-12 col-md-4">
        <label class="form-label mb-1 fw-semibold text-secondary small">ğŸ” Buscar (Nombre/ID)</label>
        <div class="input-group input-group-sm">
          <input type="text" class="form-control rounded-3" placeholder="Nombre..." [(ngModel)]="terminoBusqueda"
            (keyup)="filtrarPorFecha()">
        </div>
      </div>

      <!-- 2. Rango Fechas -->
      <div class="col-12 col-md-4">
        <label class="form-label mb-1 fw-semibold text-secondary small">ğŸ“… Rango de Fechas</label>
        <div class="input-group input-group-sm">
          <input type="date" class="form-control rounded-3" [(ngModel)]="fechaInicio" (change)="filtrarPorFecha()">
          <span class="input-group-text">-</span>
          <input type="date" class="form-control rounded-3" [(ngModel)]="fechaFin" (change)="filtrarPorFecha()">
        </div>
      </div>

      <!-- 3. Rango Unidades -->
      <div class="col-12 col-md-2">
        <label class="form-label mb-1 fw-semibold text-secondary small">ğŸ“¦ Unidades</label>
        <div class="input-group input-group-sm">
          <input type="number" class="form-control" placeholder="Min" [(ngModel)]="unidadesMin"
            (change)="filtrarPorFecha()">
          <input type="number" class="form-control" placeholder="Max" [(ngModel)]="unidadesMax"
            (change)="filtrarPorFecha()">
        </div>
      </div>

      <!-- 4. Rango Total ($) -->
      <div class="col-12 col-md-2">
        <label class="form-label mb-1 fw-semibold text-secondary small">ğŸ’° Total ($)</label>
        <div class="input-group input-group-sm">
          <input type="number" class="form-control" placeholder="Min" [(ngModel)]="totalMin"
            (change)="filtrarPorFecha()">
          <input type="number" class="form-control" placeholder="Max" [(ngModel)]="totalMax"
            (change)="filtrarPorFecha()">
        </div>
      </div>

    </div>

  </div>

  <!-- Tabla de datos -->
  <div class="table-responsive rounded-3 overflow-hidden">
    <table class="table table-bordered table-hover align-middle mb-0">
      <thead class="table-primary text-center fw-bold">
        <tr>
          <th>#</th>
          <th>Producto</th>
          <th>Fecha</th>
          <th>Unidades</th>
          <th>Total</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let venta of ventasFiltradas" class="text-center">
          <th scope="row">{{ venta.ID }}</th>
          <td class="text-start">{{ venta.PRODUCT_NAME }}</td>
          <td>{{ venta.FECHA | date: 'mediumDate' }}</td>
          <td>{{ venta.EXISTENCIA_DE_SALIDA }}</td>
          <td class="text-success fw-semibold">${{ venta.DINERO_GENERADO }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>